<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å¾å…ˆç”Ÿ/è”¡å°å§ - æ³¢è˜­10æ—¥æ­·å²æ–‡åŒ–ä¹‹æ—… (æœ€çµ‚ç‰ˆ)</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>
    <style>
        /* è‡ªè¨‚æ¨£å¼ï¼Œç¢ºä¿æ™‚é–“è»¸ç·šæ¢ */
        .timeline-line {
            position: absolute;
            left: 1rem; /* 4px */
            top: 0;
            bottom: 0;
            width: 2px;
            background-color: #e5e7eb; /* gray-200 */
        }
        .timeline-line-marker {
            position: absolute;
            left: 0.5rem;
            width: 1rem;
            height: 1rem;
            background-color: #10b981; /* emerald-500 */
            border-radius: 50%;
            transform: translateX(-50%);
            z-index: 10;
        }
        /* éš±è—é è¨­æ²è»¸ï¼Œåƒ…é™æ–¼æ¡Œé¢ç€è¦½å™¨ */
        ::-webkit-scrollbar { width: 8px; height: 8px; }
        ::-webkit-scrollbar-thumb { background: #cbd5e1; border-radius: 10px; }
        ::-webkit-scrollbar-track { background: #f1f5f9; }
    </style>
</head>
<body class="bg-gray-50 text-gray-800">

    <nav class="bg-white shadow-lg sticky top-0 z-50">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center h-16">
                <div class="text-xl font-bold text-emerald-600">æ³¢è˜­10æ—¥æ—…ç¨‹</div>
                <div class="flex space-x-4">
                    <button class="nav-btn p-2 rounded-md hover:bg-emerald-50 text-emerald-600 font-medium transition duration-150" data-target="overview">è¡Œç¨‹ç¸½è¦½</button>
                    <button class="nav-btn p-2 rounded-md hover:bg-emerald-50 text-gray-600 font-medium transition duration-150" data-target="daily">æ¯æ—¥è¡Œç¨‹</button>
                    <button class="nav-btn p-2 rounded-md hover:bg-emerald-50 text-gray-600 font-medium transition duration-150" data-target="food">ç¾é£Ÿåœ°åœ–</button>
                    <button class="nav-btn p-2 rounded-md hover:bg-emerald-50 text-gray-600 font-medium transition duration-150" data-target="info">äº¤é€šä½å®¿</button>
                    <button class="nav-btn p-2 rounded-md hover:bg-emerald-50 text-gray-600 font-medium transition duration-150" data-target="prep">è¡Œå‰æº–å‚™</button>
                </div>
            </div>
        </div>
    </nav>

    <main class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">

        <section id="overview" class="page-section">
            <h2 class="text-3xl font-bold mb-6 text-emerald-700 border-b-2 border-emerald-300 pb-2">âœˆï¸ è¡Œç¨‹ç¸½è¦½</h2>
            <div class="bg-white p-6 rounded-lg shadow-xl grid md:grid-cols-2 lg:grid-cols-4 gap-6">
                <div class="p-4 bg-emerald-50 rounded-lg">
                    <p class="text-sm text-gray-500">æ—¥æœŸ</p>
                    <p class="text-xl font-semibold text-emerald-600">2/13 (äº”) â†’ 2/22 (æ—¥)</p>
                </div>
                <div class="p-4 bg-emerald-50 rounded-lg">
                    <p class="text-sm text-gray-500">å¤©æ•¸</p>
                    <p class="text-xl font-semibold text-emerald-600">10 å¤©</p>
                </div>
                <div class="p-4 bg-emerald-50 rounded-lg">
                    <p class="text-sm text-gray-500">ç›®çš„åœ°</p>
                    <p class="text-xl font-semibold text-emerald-600">æ³¢è˜­ (å¸ƒé”ä½©æ–¯ â†’ å…‹æ‹‰ç§‘å¤« â†’ è¯æ²™)</p>
                </div>
                <div class="p-4 bg-emerald-50 rounded-lg">
                    <p class="text-sm text-gray-500">åŒè¡Œæˆå“¡</p>
                    <p class="text-xl font-semibold text-emerald-600">å¾å…ˆç”Ÿ / è”¡å°å§</p>
                </div>
            </div>

            <h3 class="text-2xl font-bold mt-10 mb-4 text-gray-700">åŸå¸‚é–“äº¤é€šæ¯”è¼ƒ (ç«è»Š)</h3>
            <div class="bg-white p-6 rounded-lg shadow-xl">
                <canvas id="trafficChart" height="100"></canvas>
            </div>
            <p class="mt-4 text-sm text-gray-500">**åœ–è¡¨èªªæ˜:** æ¯”è¼ƒå¸ƒé”ä½©æ–¯ â†’ å…‹æ‹‰ç§‘å¤« (å¤œè‡¥) èˆ‡ å…‹æ‹‰ç§‘å¤« â†’ è¯æ²™ (é«˜éµ) çš„æ—…è¡Œæ™‚é–“å’Œé ä¼°è²»ç”¨ã€‚</p>
        </section>

        <hr class="my-10 border-gray-200">

        <section id="daily" class="page-section hidden">
            <h2 class="text-3xl font-bold mb-8 text-emerald-700 border-b-2 border-emerald-300 pb-2">ğŸ“… æ¯æ—¥è¡Œç¨‹ (æ™‚é–“è»¸)</h2>

            <div id="itinerary-list" class="space-y-12">
                </div>
        </section>

        <hr class="my-10 border-gray-200">

        <section id="food" class="page-section hidden">
            <h2 class="text-3xl font-bold mb-6 text-emerald-700 border-b-2 border-emerald-300 pb-2">ğŸœ ç¾é£Ÿåœ°åœ–</h2>
            <div class="flex space-x-3 mb-6">
                <button class="food-filter-btn px-4 py-2 rounded-full text-white bg-emerald-600 hover:bg-emerald-700 transition duration-150" data-filter="all">æ‰€æœ‰ç¾é£Ÿ</button>
                <button class="food-filter-btn px-4 py-2 rounded-full text-gray-600 bg-gray-200 hover:bg-gray-300 transition duration-150" data-filter="local">ç•¶åœ°ç¾é£Ÿ</button>
                <button class="food-filter-btn px-4 py-2 rounded-full text-gray-600 bg-gray-200 hover:bg-gray-300 transition duration-150" data-filter="snack">ç‰¹è‰²å°åƒ</button>
                <button class="food-filter-btn px-4 py-2 rounded-full text-gray-600 bg-gray-200 hover:bg-gray-300 transition duration-150" data-filter="dessert">å’–å•¡/ç”œé»</button>
            </div>
            
            <div id="food-list" class="grid sm:grid-cols-2 lg:grid-cols-3 gap-6">
                </div>
        </section>

        <hr class="my-10 border-gray-200">

        <section id="info" class="page-section hidden">
            <h2 class="text-3xl font-bold mb-6 text-emerald-700 border-b-2 border-emerald-300 pb-2">ğŸ›ï¸ äº¤é€šä½å®¿è³‡è¨Š</h2>
            
            <h3 class="text-2xl font-bold mb-4 text-gray-700">ä½å®¿è³‡è¨Š</h3>
            <div class="space-y-6">
                <div class="bg-white p-6 rounded-lg shadow-xl">
                    <p class="text-lg font-semibold text-emerald-600">å¸ƒé”ä½©æ–¯ (2/13 â†’ 2/16): ä¸ƒå­£å…¬å¯“é…’åº—</p>
                    <p class="text-gray-500">7 Seasons Apartments</p>
                    <a href="https://www.google.com/maps/search/?api=1&query=7+Seasons+Apartments+Budapest" target="_blank" class="text-blue-500 hover:text-blue-700 underline text-sm">Google Maps é€£çµ</a>
                </div>
                <div class="bg-white p-6 rounded-lg shadow-xl">
                    <p class="text-lg font-semibold text-emerald-600">å…‹æ‹‰ç§‘å¤« (2/17 â†’ 2/20): PLANTONIA Aparthotel</p>
                    <p class="text-gray-500">PLANTONIA Aparthotel</p>
                    <a href="https://www.google.com/maps/search/?api=1&query=PLANTONIA+Aparthotel+Krakow" target="_blank" class="text-blue-500 hover:text-blue-700 underline text-sm">Google Maps é€£çµ</a>
                </div>
                <div class="bg-white p-6 rounded-lg shadow-xl">
                    <p class="text-lg font-semibold text-emerald-600">è¯æ²™ (2/20 â†’ 2/22): GreenView Warsaw City Centre</p>
                    <p class="text-gray-500">Ogrodowa $\Omega$ invoice FV (åƒè€ƒåœ°å€: Ogrodowa 65)</p>
                    <a href="https://www.google.com/maps/search/?api=1&query=GreenView+Warsaw+City+Centre+Ogrodowa+65" target="_blank" class="text-blue-500 hover:text-blue-700 underline text-sm">Google Maps é€£çµ (Ogrodowa 65)</a>
                </div>
            </div>

            <h3 class="text-2xl font-bold mt-8 mb-4 text-gray-700">äº¤é€šè³‡è¨Š</h3>
            <div class="bg-white p-6 rounded-lg shadow-xl space-y-4">
                <p><span class="font-bold text-emerald-600">åŸå¸‚é–“ï¼š</span> å¸ƒé”ä½©æ–¯ â†’ å…‹æ‹‰ç§‘å¤«ï¼š**å¤œè‡¥ç«è»Š EN 476**ï¼›å…‹æ‹‰ç§‘å¤« â†’ è¯æ²™ï¼š**æ³¢è˜­é«˜éµ (EIC/IC)**ã€‚</p>
                <p><span class="font-bold text-emerald-600">å¸‚å€å…§ï¼š</span> å»ºè­°ä½¿ç”¨**ç•¶åœ°è¼•è»Œ (Tram)** æˆ–**å…¬è»Š**ã€‚å¯è€ƒæ…®è³¼è²·**åŸå¸‚æ—¥ç¥¨**ã€‚</p>
                <p class="text-sm text-gray-500">ğŸ’¡ å»ºè­°åœ¨ç•¶åœ°ä¸‹è¼‰äº¤é€š App (å¦‚ Jakdojade/Google Maps) ä»¥æŸ¥è©¢å³æ™‚ç­æ¬¡ã€‚</p>
            </div>
        </section>

        <hr class="my-10 border-gray-200">

        <section id="prep" class="page-section hidden">
            <h2 class="text-3xl font-bold mb-6 text-emerald-700 border-b-2 border-emerald-300 pb-2">ğŸ“ è¡Œå‰æº–å‚™æ¸…å–®</h2>
            <div class="bg-white p-6 rounded-lg shadow-xl">
                <ul id="checklist" class="space-y-2">
                    <li class="flex items-center space-x-2"><input type="checkbox" id="check-passport" class="rounded text-emerald-600 focus:ring-emerald-500"><label for="check-passport">è­·ç…§ã€ç°½è­‰ã€é›»å­æ©Ÿç¥¨</label></li>
                    <li class="flex items-center space-x-2"><input type="checkbox" id="check-currency" class="rounded text-emerald-600 focus:ring-emerald-500"><label for="check-currency">æ­å…ƒ/æ³¢è˜­å¹£ (PLN) ç¾é‡‘</label></li>
                    <li class="flex items-center space-x-2"><input type="checkbox" id="check-adaptor" class="rounded text-emerald-600 focus:ring-emerald-500"><label for="check-adaptor">æ­è¦è½‰æ¥é ­ (Type E/C)</label></li>
                    <li class="flex items-center space-x-2"><input type="checkbox" id="check-coat" class="rounded text-emerald-600 focus:ring-emerald-500"><label for="check-coat">ä¿æš–è¡£ç‰© (2æœˆæ³¢è˜­å¤©æ°£å¯’å†·)</label></li>
                    <li class="flex items-center space-x-2"><input type="checkbox" id="check-insurance" class="rounded text-emerald-600 focus:ring-emerald-500"><label for="check-insurance">æ—…éŠä¿éšªæ–‡ä»¶</label></li>
                </ul>
                <p class="mt-4 text-sm text-gray-500">ğŸ’¡ é»æ“Šæ–¹æ¡†å¯æ¨™è¨˜å·²å®Œæˆé …ç›®ã€‚</p>
            </div>
        </section>
        
    </main>

    <script>
        // --- æ•¸æ“šçµæ§‹å®šç¾© (å·²æ›´æ–°ç‚ºçœŸå¯¦ Google Maps æŸ¥è©¢é€£çµ) ---

        const itineraryData = [
            // D1: å¸ƒé”ä½©æ–¯
            { date: '2/13 (äº”)', city: 'å¸ƒé”ä½©æ–¯', accommodations: 'ä¸ƒå­£å…¬å¯“é…’åº—', items: [
                { time: '08:50', title: 'æŠµé”å¸ƒé”ä½©æ–¯', type: 'Flight/Train', duration: 'å…¥ä½é£¯åº—', mapLink: 'https://www.google.com/maps/search/?api=1&query=7+Seasons+Apartments+Budapest', transport: 'æ©Ÿå ´æ¥é§/é›»è»Š', notes: 'ä¸ƒå­£å…¬å¯“é…’åº— (7 Seasons Apartments)' },
                { time: 'ä¸‹åˆ', title: 'è–å²è’‚èŠ¬æ•™å ‚ (St. Stephen\'s Basilica)', type: 'Sightseeing', duration: '1.5 hr', mapLink: 'https://www.google.com/maps/search/?api=1&query=St.+Stephen%27s+Basilica+Budapest', transport: 'æ­¥è¡Œ', notes: 'ç™»é ‚è§€æ™¯' },
                { time: 'å‚æ™š', title: 'å¤šç‘™æ²³ç•”æ•£æ­¥ (é–éˆæ©‹é™„è¿‘)', type: 'Leisure', duration: '1 hr', mapLink: 'https://www.google.com/maps/search/?api=1&query=Sz%C3%A9chenyi+Chain+Bridge+Budapest', transport: 'æ­¥è¡Œ', notes: 'æ¬£è³å¤œæ™¯' }
            ]},
            // D2: å¸ƒé”ä½©æ–¯
            { date: '2/14 (å…­)', city: 'å¸ƒé”ä½©æ–¯', accommodations: 'ä¸ƒå­£å…¬å¯“é…’åº—', items: [
                { time: 'ä¸Šåˆ', title: 'å¸ƒé”çš‡å®® (Buda Castle) & æ¼äººå ¡ (Fisherman\'s Bastion)', type: 'Sightseeing', duration: '3 hr', mapLink: 'https://www.google.com/maps/search/?api=1&query=Fisherman%27s+Bastion+and+Buda+Castle', transport: 'å…¬è»Š/æ­¥è¡Œ', notes: 'å¤šç‘™æ²³æ™¯è§€' },
                { time: 'ä¸‹åˆ', title: 'åœ‹æœƒå¤§å»ˆ (Hungarian Parliament Building)', type: 'Sightseeing', duration: '2 hr', mapLink: 'https://www.google.com/maps/search/?api=1&query=Hungarian+Parliament+Building', transport: 'é›»è»Š/æ­¥è¡Œ', notes: 'å¯è€ƒæ…®å…§éƒ¨å°è¦½' },
                { time: 'æ™šä¸Š', title: 'å¤šç‘™æ²³å¤œéŠ', type: 'Activity', duration: '2 hr', mapLink: 'https://www.google.com/maps/search/?api=1&query=Hungarian+Parliament+Building', transport: 'æ­¥è¡Œ', notes: 'åœ‹æœƒå¤§å»ˆå¤œæ™¯é»' }
            ]},
            // D3: å¸ƒé”ä½©æ–¯
            { date: '2/15 (æ—¥)', city: 'å¸ƒé”ä½©æ–¯', accommodations: 'ä¸ƒå­£å…¬å¯“é…’åº—', items: [
                { time: 'ä¸Šåˆ', title: 'è‹±é›„å»£å ´ (HÅ‘sÃ¶k tere) & åŸå¸‚å…¬åœ’ (City Park)', type: 'Sightseeing', duration: '2 hr', mapLink: 'https://www.google.com/maps/search/?api=1&query=Heroes%27+Square+and+City+Park+Budapest', transport: 'åœ°éµ' },
                { time: 'ä¸‹åˆ', title: 'å¡åˆ‡å°¼æº«æ³‰ (SzÃ©chenyi Thermal Bath)', type: 'Relaxation', duration: '3 hr', mapLink: 'https://www.google.com/maps/search/?api=1&query=Sz%C3%A9chenyi+Thermal+Bath', transport: 'åœ°éµ', notes: 'å¿…å»æ´»å‹•' },
                { time: 'å‚æ™š', title: 'æ­ŒåŠ‡é™¢å‘¨é‚Šæ•£æ­¥', type: 'Leisure', duration: '1 hr', mapLink: 'https://www.google.com/maps/search/?api=1&query=Hungarian+State+Opera', transport: 'åœ°éµ/æ­¥è¡Œ', notes: 'åŒˆç‰™åˆ©åœ‹å®¶æ­ŒåŠ‡é™¢' }
            ]},
            // D4: å¸ƒé”ä½©æ–¯ â†’ å…‹æ‹‰ç§‘å¤«
            { date: '2/16 (ä¸€)', city: 'å¸ƒé”ä½©æ–¯ â†’ å…‹æ‹‰ç§‘å¤«', accommodations: 'å¤œè‡¥ç«è»Š EN 476', items: [
                { time: 'ä¸Šåˆ', title: 'ä¸­å¤®å¤§å¸‚å ´ (Great Market Hall)', type: 'Shopping', duration: '2 hr', mapLink: 'https://www.google.com/maps/search/?api=1&query=Great+Market+Hall+Budapest', transport: 'é›»è»Š/æ­¥è¡Œ', notes: 'æ¡è²·ç¦®ç‰©' },
                { time: 'ä¸‹åˆ', title: 'æ ¼é›·ç‰¹å±±è§€æ™¯ (GellÃ©rt Hill)', type: 'Sightseeing', duration: '2 hr', mapLink: 'https://www.google.com/maps/search/?api=1&query=Gell%C3%A9rt+Hill+Budapest', transport: 'é›»è»Š/æ­¥è¡Œ', notes: 'ä¿¯ç°åŸå¸‚å…¨æ™¯' },
                { time: 'æ™šé–“', title: 'å¸ƒé”ä½©æ–¯ç«è»Šç«™ (Budapest Keleti) â†’ ç™»è»Š', type: 'Departure', duration: 'check-in', mapLink: 'https://www.google.com/maps/search/?api=1&query=Budapest+Keleti+railway+station', transport: 'ç«è»Š', notes: '20:00 ç™¼è»Š (æ¨æ¸¬)' }
            ]},
            // D5: å…‹æ‹‰ç§‘å¤«
            { date: '2/17 (äºŒ)', city: 'å…‹æ‹‰ç§‘å¤«', accommodations: 'PLANTONIA Aparthotel', items: [
                { time: 'æ—©ä¸Š', title: 'æŠµé”å…‹æ‹‰ç§‘å¤« (KrakÃ³w GÅ‚Ã³wny) â†’ Check-in', type: 'Arrival', duration: 'Check-in', mapLink: 'https://www.google.com/maps/search/?api=1&query=PLANTONIA+Aparthotel+Krakow', transport: 'ç«è»Š', notes: 'PLANTONIA Aparthotel' },
                { time: 'ä¸Šåˆ', title: 'è€åŸå»£å ´ (Rynek GÅ‚Ã³wny)', type: 'Sightseeing', duration: '1.5 hr', mapLink: 'https://www.google.com/maps/search/?api=1&query=Main+Square+Krakow', transport: 'é›»è»Š/æ­¥è¡Œ', notes: 'æ­æ´²æœ€å¤§ä¸­ä¸–ç´€å»£å ´' },
                { time: 'ä¸‹åˆ', title: 'è–æ¯æ•™å ‚ (St. Mary\'s Basilica) & ç¹”å¸ƒæœƒé¤¨ (Sukiennice)', type: 'Sightseeing/Shopping', duration: '2 hr', mapLink: 'https://www.google.com/maps/search/?api=1&query=Main+Square+Krakow', transport: 'æ­¥è¡Œ', notes: 'æ¬£è³æ•™å ‚è™Ÿè§’' }
            ]},
            // D6: å…‹æ‹‰ç§‘å¤«
            { date: '2/18 (ä¸‰)', city: 'å…‹æ‹‰ç§‘å¤«', accommodations: 'PLANTONIA Aparthotel', items: [
                { time: 'ä¸Šåˆ', title: 'ç“¦ç¶­çˆ¾åŸå ¡ (Wawel Castle) & ä¸»æ•™å ‚', type: 'Sightseeing', duration: '3 hr', mapLink: 'https://www.google.com/maps/search/?api=1&query=Wawel+Royal+Castle+Krakow', transport: 'æ­¥è¡Œ', notes: 'æ³¢è˜­åœ‹å¯¶' },
                { time: 'ä¸‹åˆ', title: 'Kazimierz çŒ¶å¤ªå€æ•£æ­¥', type: 'Sightseeing/Culture', duration: '2 hr', mapLink: 'https://www.google.com/maps/search/?api=1&query=Kazimierz+Krakow', transport: 'é›»è»Š', notes: 'é›»å½±ã€Šè¾›å¾·å‹’çš„åå–®ã€‹å ´æ™¯' }
            ]},
            // D7: å…‹æ‹‰ç§‘å¤«
            { date: '2/19 (å››)', city: 'å…‹æ‹‰ç§‘å¤«', accommodations: 'PLANTONIA Aparthotel', items: [
                { time: 'æ•´æ—¥', title: 'å¥§æ–¯å¨è¾›é›†ä¸­ç‡Ÿ (Auschwitz-Birkenau)', type: 'Culture/History', duration: '8 hr', mapLink: 'https://www.google.com/maps/search/?api=1&query=Auschwitz-Birkenau+Memorial+and+Museum', transport: 'å°ˆå±¬å·´å£«/ç«è»Š (å»ºè­°åƒåŠ ç•¶åœ°ä¸€æ—¥éŠ)', notes: 'æ·±å…·æ„ç¾©çš„æ­·å²è¡Œç¨‹' }
            ]},
            // D8: å…‹æ‹‰ç§‘å¤« â†’ è¯æ²™
            { date: '2/20 (äº”)', city: 'å…‹æ‹‰ç§‘å¤« â†’ è¯æ²™', accommodations: 'GreenView Warsaw City Centre', items: [
                { time: 'æ—©ä¸Š', title: 'æ­ç«è»Šå‰å¾€è¯æ²™ (Warszawa Centralna) â†’ æŠµé”', type: 'Transit', duration: '3.5 hr', mapLink: 'https://www.google.com/maps/search/?api=1&query=Warszawa+Centralna+train+station', transport: 'æ³¢è˜­é«˜éµ (EIC/IC)', notes: 'ç´„ 08:00 ç™¼è»Š' },
                { time: 'ä¸‹åˆ', title: 'è¯æ²™è€åŸå€ (Stare Miasto)', type: 'Sightseeing', duration: '2 hr', mapLink: 'https://www.google.com/maps/search/?api=1&query=Warsaw+Old+Town', transport: 'é›»è»Š/æ­¥è¡Œ', notes: 'å¾å»¢å¢Ÿä¸­é‡å»ºçš„æ­·å²éºç”¢' },
                { time: 'å‚æ™š', title: 'çš‡å®¶åŸå ¡ (Royal Castle) & ç¾äººé­šé›•åƒ', type: 'Sightseeing', duration: '1.5 hr', mapLink: 'https://www.google.com/maps/search/?api=1&query=Royal+Castle+in+Warsaw', transport: 'æ­¥è¡Œ' }
            ]},
            // D9: è¯æ²™
            { date: '2/21 (å…­)', city: 'è¯æ²™', accommodations: 'GreenView Warsaw City Centre', items: [
                { time: 'ä¸Šåˆ', title: 'è¯æ²™èµ·ç¾©åšç‰©é¤¨ (Warsaw Rising Museum)', type: 'History', duration: '3 hr', mapLink: 'https://www.google.com/maps/search/?api=1&query=Warsaw+Rising+Museum', transport: 'é›»è»Š', notes: 'äº†è§£äºŒæˆ°è¯æ²™èµ·ç¾©çš„æ­·å²' },
                { time: 'ä¸‹åˆ', title: 'Nowy Åšwiat è³¼ç‰©è¡— & ç¾è¡“é¤¨ (National Museum in Warsaw)', type: 'Shopping/Culture', duration: '3 hr', mapLink: 'https://www.google.com/maps/search/?api=1&query=National+Museum+in+Warsaw+and+Nowy+Swiat', transport: 'é›»è»Š/æ­¥è¡Œ', notes: 'è¯æ²™åœ‹å®¶åšç‰©é¤¨' }
            ]},
            // D10: è¯æ²™ â†’ é›¢å¢ƒ
            { date: '2/22 (æ—¥)', city: 'è¯æ²™ â†’ é›¢å¢ƒ', accommodations: 'NA', items: [
                { time: 'ä¸Šåˆ', title: 'å½ˆæ€§æ™‚é–“', type: 'Leisure', duration: '3 hr', mapLink: 'https://www.google.com/maps/search/?api=1&query=Warsaw+Old+Town', transport: 'æ­¥è¡Œ', notes: 'æœ€å¾Œæ¡è²·/å’–å•¡ (è€åŸå€)' },
                { time: 'å‚æ™š', title: 'å‰å¾€æ©Ÿå ´ (WAW) â†’ é›¢å¢ƒ', type: 'Departure', duration: 'Check-out', mapLink: 'https://www.google.com/maps/search/?api=1&query=Warsaw+Chopin+Airport+WAW', transport: 'æ©Ÿå ´å¿«ç·š/è¨ˆç¨‹è»Š', notes: 'è¯æ²™è•­é‚¦æ©Ÿå ´ (WAW) 16:00 å‡ºç™¼ (æ¨ç®—)' }
            ]},
        ];

        const foodData = [
            { name: 'Gulasch (åŒˆç‰™åˆ©ç‡‰è‚‰)', city: 'å¸ƒé”ä½©æ–¯', tag: 'local', mapLink: 'https://www.google.com/maps/search/?api=1&query=Gulasch+restaurant+Central+Market+Hall+Budapest', notes: 'å‚³çµ±åŒˆç‰™åˆ©ç¾é£Ÿ (ä¸­å¤®å¤§å¸‚å ´ Central Market Hall é™„è¿‘)' },
            { name: 'KremÃ³wka Papieska (æ•™çš‡å¥¶æ²¹è›‹ç³•)', city: 'å…‹æ‹‰ç§‘å¤«', tag: 'dessert', mapLink: 'https://www.google.com/maps/search/?api=1&query=Kremowka+near+Krakow+Main+Square', notes: 'æ³¢è˜­ç¶“å…¸ç”œé»ï¼Œæ•™çš‡æœ€æ„› (è€åŸå»£å ´é™„è¿‘)' },
            { name: 'Pierogi (æ³¢è˜­é¤ƒå­)', city: 'å…‹æ‹‰ç§‘å¤«', tag: 'local', mapLink: 'https://www.google.com/maps/search/?api=1&query=Pierogarnia+Krakowiacy', notes: 'å¿…åƒï¼æœ‰é¹¹æœ‰ç”œ (æ¨è–¦é¤å»³ï¼šPierogarnia Krakowiacy)' },
            { name: 'Zapiekanka (æ³¢è˜­é–‹æ”¾å¼ä¸‰æ˜æ²»)', city: 'å…‹æ‹‰ç§‘å¤«', tag: 'snack', mapLink: 'https://www.google.com/maps/search/?api=1&query=Zapiekanka+Plac+Nowy+Krakow', notes: 'çŒ¶å¤ªå€ç‰¹è‰²å°åƒ (Plac Nowy åœ“ç’°)' },
            { name: 'PÄ…czki (æ³¢è˜­ç”œç”œåœˆ)', city: 'è¯æ²™', tag: 'dessert', mapLink: 'https://www.google.com/maps/search/?api=1&query=P%C4%85czki+Nowy+%C5%9Awiat+Warsaw', notes: 'æ¯”ç¾å¼ç”œç”œåœˆæ›´ç´®å¯¦ï¼Œç«ç‘°é†¬å£å‘³ç¶“å…¸ (Nowy Åšwiat é™„è¿‘)' },
            { name: 'Å»urek (é…¸è£¸éº¥æ¹¯)', city: 'è¯æ²™', tag: 'local', mapLink: 'https://www.google.com/maps/search/?api=1&query=Zurek+restaurant+Warsaw+Old+Town', notes: 'å‚³çµ±æ³¢è˜­æ¹¯å“ï¼Œå¸¸ä»¥éºµåŒ…ç¢—ç››è£ (è€åŸå€é™„è¿‘)' },
        ];


        // --- æ ¸å¿ƒå‡½æ•¸ ---

        // 1. å°è¦½åˆ—åˆ‡æ›é‚è¼¯
        document.querySelectorAll('.nav-btn').forEach(button => {
            button.addEventListener('click', (e) => {
                const targetId = e.target.dataset.target;
                
                // éš±è—æ‰€æœ‰å€å¡Š
                document.querySelectorAll('.page-section').forEach(section => {
                    section.classList.add('hidden');
                });
                // é¡¯ç¤ºç›®æ¨™å€å¡Š
                document.getElementById(targetId).classList.remove('hidden');

                // æ›´æ–°å°è¦½åˆ—æŒ‰éˆ•æ¨£å¼
                document.querySelectorAll('.nav-btn').forEach(btn => {
                    btn.classList.remove('text-emerald-600', 'bg-emerald-50');
                    btn.classList.add('text-gray-600', 'bg-transparent');
                });
                e.target.classList.add('text-emerald-600', 'bg-emerald-50');
                e.target.classList.remove('text-gray-600', 'bg-transparent');
            });
        });

        // 2. æ¯æ—¥è¡Œç¨‹æ™‚é–“è»¸ç”Ÿæˆ
        function renderItinerary() {
            const container = document.getElementById('itinerary-list');
            container.innerHTML = ''; // æ¸…ç©ºèˆŠå…§å®¹

            itineraryData.forEach(day => {
                const dayHeader = `
                    <div class="bg-emerald-600 text-white p-4 rounded-t-lg shadow-md">
                        <h3 class="text-xl font-bold">${day.date} - ${day.city}</h3>
                        <p class="text-sm">ä½å®¿: ${day.accommodations}</p>
                    </div>
                    <div class="bg-white p-6 rounded-b-lg shadow-xl relative mt-[-1px]">
                        <div class="timeline-line"></div>
                        <div class="space-y-6 pt-2">
                            ${day.items.map(item => `
                                <div class="flex items-start relative pl-10">
                                    <div class="timeline-line-marker -ml-1"></div>
                                    <div class="flex-1">
                                        <p class="text-xs font-semibold text-emerald-500">${item.time} (${item.transport})</p>
                                        <h4 class="text-lg font-bold text-gray-800">${item.title.replace('â†’', 'â†’')}</h4>
                                        <p class="text-sm text-gray-600 mb-1">${item.notes || ''} <span class="text-emerald-600 font-medium">| å»ºè­°åœç•™: ${item.duration}</span></p>
                                        <a href="${item.mapLink}" target="_blank" class="text-blue-500 hover:text-blue-700 underline text-sm flex items-center">
                                            <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 mr-1" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.828 0L6.343 16.657A8 8 0 1117.657 16.657z" /><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z" /></svg>
                                            Google Maps è·¯ç·š/åœ°é»
                                        </a>
                                    </div>
                                </div>
                            `).join('')}
                        </div>
                    </div>
                `;
                container.innerHTML += dayHeader;
            });
        }

        // 3. ç¾é£Ÿåœ°åœ–ç¯©é¸é‚è¼¯
        function renderFoodList(filter = 'all') {
            const container = document.getElementById('food-list');
            container.innerHTML = '';
            
            const filteredData = filter === 'all' 
                ? foodData 
                : foodData.filter(food => food.tag === filter);

            filteredData.forEach(food => {
                const tagMap = {
                    'local': 'ç•¶åœ°ç¾é£Ÿ',
                    'snack': 'ç‰¹è‰²å°åƒ',
                    'dessert': 'å’–å•¡/ç”œé»'
                };
                const foodCard = `
                    <div class="bg-white p-5 rounded-lg shadow-lg border-t-4 border-emerald-400" data-tag="${food.tag}">
                        <div class="flex justify-between items-start mb-2">
                            <h4 class="text-xl font-bold text-gray-800">${food.name}</h4>
                            <span class="text-xs font-medium px-2 py-1 bg-emerald-100 text-emerald-800 rounded-full">${tagMap[food.tag]}</span>
                        </div>
                        <p class="text-sm text-gray-500 mb-2">åŸå¸‚: ${food.city}</p>
                        <p class="text-base text-gray-600 mb-3">æ¨è–¦: ${food.notes}</p>
                        <a href="${food.mapLink}" target="_blank" class="text-blue-500 hover:text-blue-700 underline text-sm flex items-center">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 mr-1" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.828 0L6.343 16.657A8 8 0 1117.657 16.657z" /><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z" /></svg>
                            æŸ¥çœ‹åœ°åœ–ä½ç½®
                        </a>
                    </div>
                `;
                container.innerHTML += foodCard;
            });
            
            // ç¯©é¸æŒ‰éˆ•æ¨£å¼æ›´æ–°
            document.querySelectorAll('.food-filter-btn').forEach(btn => {
                if (btn.dataset.filter === filter) {
                    btn.classList.remove('text-gray-600', 'bg-gray-200');
                    btn.classList.add('text-white', 'bg-emerald-600');
                } else {
                    btn.classList.add('text-gray-600', 'bg-gray-200');
                    btn.classList.remove('text-white', 'bg-emerald-600');
                }
            });
        }

        document.querySelectorAll('.food-filter-btn').forEach(button => {
            button.addEventListener('click', (e) => {
                renderFoodList(e.target.dataset.filter);
            });
        });

        // 4. Chart.js åœ–è¡¨åˆå§‹åŒ–
        function initTrafficChart() {
            const ctx = document.getElementById('trafficChart').getContext('2d');
            new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: ['å¸ƒé”ä½©æ–¯ â†’ å…‹æ‹‰ç§‘å¤« (å¤œè‡¥ç«è»Š)', 'å…‹æ‹‰ç§‘å¤« â†’ è¯æ²™ (é«˜éµ)'],
                    datasets: [
                        {
                            label: 'æ—…è¡Œæ™‚é–“ (å°æ™‚)',
                            data: [12, 3.5], // 12å°æ™‚å¤œè‡¥ï¼Œ3.5å°æ™‚é«˜éµ
                            backgroundColor: '#059669', // emerald-600
                            borderColor: '#047857', // emerald-700
                            borderWidth: 1,
                            yAxisID: 'y'
                        },
                        {
                            label: 'é ä¼°è²»ç”¨ (æ­å…ƒ)',
                            data: [90, 40], // 90æ­å…ƒå¤œè‡¥ç¥¨ï¼Œ40æ­å…ƒé«˜éµç¥¨ (æ¨ä¼°)
                            backgroundColor: '#34d399', // emerald-400
                            borderColor: '#10b981', // emerald-500
                            borderWidth: 1,
                            yAxisID: 'y1'
                        }
                    ]
                },
                options: {
                    responsive: true,
                    plugins: {
                        legend: { position: 'top' },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    let label = context.dataset.label || '';
                                    if (label) {
                                        label += ': ';
                                    }
                                    if (context.parsed.y !== null) {
                                        if (context.datasetIndex === 0) {
                                            label += context.parsed.y + ' å°æ™‚';
                                        } else {
                                            label += context.parsed.y + ' æ­å…ƒ';
                                        }
                                    }
                                    return label;
                                }
                            }
                        }
                    },
                    scales: {
                        y: {
                            type: 'linear',
                            display: true,
                            position: 'left',
                            title: { display: true, text: 'æ—…è¡Œæ™‚é–“ (å°æ™‚)' }
                        },
                        y1: {
                            type: 'linear',
                            display: true,
                            position: 'right',
                            grid: { drawOnChartArea: false }, // åªç•«å·¦å´ç¶²æ ¼
                            title: { display: true, text: 'é ä¼°è²»ç”¨ (æ­å…ƒ)' }
                        }
                    }
                }
            });
        }
        
        // 5. è¡Œå‰æº–å‚™æ¸…å–®äº’å‹• (ä½¿ç”¨ localStorage å„²å­˜ç‹€æ…‹)
        function initChecklist() {
            const checklist = document.getElementById('checklist');
            const storedState = JSON.parse(localStorage.getItem('travelChecklist')) || {};

            checklist.querySelectorAll('input[type="checkbox"]').forEach(checkbox => {
                const id = checkbox.id;
                // è¼‰å…¥å„²å­˜çš„ç‹€æ…‹
                if (storedState[id]) {
                    checkbox.checked = true;
                }

                // é»æ“Šå„²å­˜ç‹€æ…‹
                checkbox.addEventListener('change', (e) => {
                    storedState[id] = e.target.checked;
                    localStorage.setItem('travelChecklist', JSON.stringify(storedState));
                });
            });
        }


        // --- é é¢å•Ÿå‹• ---
        document.addEventListener('DOMContentLoaded', () => {
            renderItinerary(); // æ¸²æŸ“æ¯æ—¥è¡Œç¨‹
            renderFoodList('all'); // æ¸²æŸ“ç¾é£Ÿåœ°åœ– (é è¨­é¡¯ç¤ºå…¨éƒ¨)
            initTrafficChart(); // åˆå§‹åŒ–åœ–è¡¨
            initChecklist(); // åˆå§‹åŒ–è¡Œå‰æº–å‚™æ¸…å–®
            
            // ç¢ºä¿é é¢å•Ÿå‹•æ™‚é¡¯ç¤ºã€Œè¡Œç¨‹ç¸½è¦½ã€ä¸¦è¨­å®šæŒ‰éˆ•æ¨£å¼
            document.getElementById('overview').classList.remove('hidden');
            document.querySelector('.nav-btn[data-target="overview"]').classList.add('text-emerald-600', 'bg-emerald-50');
            document.querySelector('.nav-btn[data-target="overview"]').classList.remove('text-gray-600', 'bg-transparent');
        });

    </script>
</body>
</html>